import"../modulepreload-polyfill-B5Qt9EMX.js";/* empty css                */import{l as G,c as rt,s as nt,h as ot}from"../sched-DruKi8Dd.js";var it=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function at(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function st(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var o=function s(){var x=!1;try{x=this instanceof s}catch{}return x?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};o.prototype=e.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(r).forEach(function(s){var x=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(o,s,x.get?x:{enumerable:!0,get:function(){return r[s]}})}),o}var ye={exports:{}};const ct={},ut=Object.freeze(Object.defineProperty({__proto__:null,default:ct},Symbol.toStringTag,{value:"Module"})),Ce=st(ut);/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.11.1
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2025
 * @license MIT
 */var Re;function ft(){return Re||(Re=1,(function(r){(function(){var e="input is invalid type",o=typeof window=="object",s=o?window:{};s.JS_SHA256_NO_WINDOW&&(o=!1);var x=!o&&typeof self=="object",w=!s.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node&&process.type!="renderer";w?s=it:x&&(s=self);var E=!s.JS_SHA256_NO_COMMON_JS&&!0&&r.exports,C=!s.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",v="0123456789abcdef".split(""),H=[-2147483648,8388608,32768,128],M=[24,16,8,0],X=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Z=["hex","array","digest","arrayBuffer"],R=[];(s.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(i){return Object.prototype.toString.call(i)==="[object Array]"}),C&&(s.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(i){return typeof i=="object"&&i.buffer&&i.buffer.constructor===ArrayBuffer});var le=function(i,p){return function(b){return new P(p,!0).update(b)[i]()}},de=function(i){var p=le("hex",i);w&&(p=V(p,i)),p.create=function(){return new P(i)},p.update=function(g){return p.create().update(g)};for(var b=0;b<Z.length;++b){var _=Z[b];p[_]=le(_,i)}return p},V=function(i,p){var b=Ce,_=Ce.Buffer,g=p?"sha224":"sha256",h;_.from&&!s.JS_SHA256_NO_BUFFER_FROM?h=_.from:h=function(f){return new _(f)};var U=function(f){if(typeof f=="string")return b.createHash(g).update(f,"utf8").digest("hex");if(f==null)throw new Error(e);return f.constructor===ArrayBuffer&&(f=new Uint8Array(f)),Array.isArray(f)||ArrayBuffer.isView(f)||f.constructor===_?b.createHash(g).update(h(f)).digest("hex"):i(f)};return U},he=function(i,p){return function(b,_){return new te(b,p,!0).update(_)[i]()}},Y=function(i){var p=he("hex",i);p.create=function(g){return new te(g,i)},p.update=function(g,h){return p.create(g).update(h)};for(var b=0;b<Z.length;++b){var _=Z[b];p[_]=he(_,i)}return p};function P(i,p){p?(R[0]=R[16]=R[1]=R[2]=R[3]=R[4]=R[5]=R[6]=R[7]=R[8]=R[9]=R[10]=R[11]=R[12]=R[13]=R[14]=R[15]=0,this.blocks=R):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=i}P.prototype.update=function(i){if(!this.finalized){var p,b=typeof i;if(b!=="string"){if(b==="object"){if(i===null)throw new Error(e);if(C&&i.constructor===ArrayBuffer)i=new Uint8Array(i);else if(!Array.isArray(i)&&(!C||!ArrayBuffer.isView(i)))throw new Error(e)}else throw new Error(e);p=!0}for(var _,g=0,h,U=i.length,f=this.blocks;g<U;){if(this.hashed&&(this.hashed=!1,f[0]=this.block,this.block=f[16]=f[1]=f[2]=f[3]=f[4]=f[5]=f[6]=f[7]=f[8]=f[9]=f[10]=f[11]=f[12]=f[13]=f[14]=f[15]=0),p)for(h=this.start;g<U&&h<64;++g)f[h>>>2]|=i[g]<<M[h++&3];else for(h=this.start;g<U&&h<64;++g)_=i.charCodeAt(g),_<128?f[h>>>2]|=_<<M[h++&3]:_<2048?(f[h>>>2]|=(192|_>>>6)<<M[h++&3],f[h>>>2]|=(128|_&63)<<M[h++&3]):_<55296||_>=57344?(f[h>>>2]|=(224|_>>>12)<<M[h++&3],f[h>>>2]|=(128|_>>>6&63)<<M[h++&3],f[h>>>2]|=(128|_&63)<<M[h++&3]):(_=65536+((_&1023)<<10|i.charCodeAt(++g)&1023),f[h>>>2]|=(240|_>>>18)<<M[h++&3],f[h>>>2]|=(128|_>>>12&63)<<M[h++&3],f[h>>>2]|=(128|_>>>6&63)<<M[h++&3],f[h>>>2]|=(128|_&63)<<M[h++&3]);this.lastByteIndex=h,this.bytes+=h-this.start,h>=64?(this.block=f[16],this.start=h-64,this.hash(),this.hashed=!0):this.start=h}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},P.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var i=this.blocks,p=this.lastByteIndex;i[16]=this.block,i[p>>>2]|=H[p&3],this.block=i[16],p>=56&&(this.hashed||this.hash(),i[0]=this.block,i[16]=i[1]=i[2]=i[3]=i[4]=i[5]=i[6]=i[7]=i[8]=i[9]=i[10]=i[11]=i[12]=i[13]=i[14]=i[15]=0),i[14]=this.hBytes<<3|this.bytes>>>29,i[15]=this.bytes<<3,this.hash()}},P.prototype.hash=function(){var i=this.h0,p=this.h1,b=this.h2,_=this.h3,g=this.h4,h=this.h5,U=this.h6,f=this.h7,F=this.blocks,L,B,$,J,A,q,t,n,c,d,a;for(L=16;L<64;++L)A=F[L-15],B=(A>>>7|A<<25)^(A>>>18|A<<14)^A>>>3,A=F[L-2],$=(A>>>17|A<<15)^(A>>>19|A<<13)^A>>>10,F[L]=F[L-16]+B+F[L-7]+$<<0;for(a=p&b,L=0;L<64;L+=4)this.first?(this.is224?(n=300032,A=F[0]-1413257819,f=A-150054599<<0,_=A+24177077<<0):(n=704751109,A=F[0]-210244248,f=A-1521486534<<0,_=A+143694565<<0),this.first=!1):(B=(i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10),$=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),n=i&p,J=n^i&b^a,t=g&h^~g&U,A=f+$+t+X[L]+F[L],q=B+J,f=_+A<<0,_=A+q<<0),B=(_>>>2|_<<30)^(_>>>13|_<<19)^(_>>>22|_<<10),$=(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7),c=_&i,J=c^_&p^n,t=f&g^~f&h,A=U+$+t+X[L+1]+F[L+1],q=B+J,U=b+A<<0,b=A+q<<0,B=(b>>>2|b<<30)^(b>>>13|b<<19)^(b>>>22|b<<10),$=(U>>>6|U<<26)^(U>>>11|U<<21)^(U>>>25|U<<7),d=b&_,J=d^b&i^c,t=U&f^~U&g,A=h+$+t+X[L+2]+F[L+2],q=B+J,h=p+A<<0,p=A+q<<0,B=(p>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10),$=(h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7),a=p&b,J=a^p&_^d,t=h&U^~h&f,A=g+$+t+X[L+3]+F[L+3],q=B+J,g=i+A<<0,i=A+q<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+i<<0,this.h1=this.h1+p<<0,this.h2=this.h2+b<<0,this.h3=this.h3+_<<0,this.h4=this.h4+g<<0,this.h5=this.h5+h<<0,this.h6=this.h6+U<<0,this.h7=this.h7+f<<0},P.prototype.hex=function(){this.finalize();var i=this.h0,p=this.h1,b=this.h2,_=this.h3,g=this.h4,h=this.h5,U=this.h6,f=this.h7,F=v[i>>>28&15]+v[i>>>24&15]+v[i>>>20&15]+v[i>>>16&15]+v[i>>>12&15]+v[i>>>8&15]+v[i>>>4&15]+v[i&15]+v[p>>>28&15]+v[p>>>24&15]+v[p>>>20&15]+v[p>>>16&15]+v[p>>>12&15]+v[p>>>8&15]+v[p>>>4&15]+v[p&15]+v[b>>>28&15]+v[b>>>24&15]+v[b>>>20&15]+v[b>>>16&15]+v[b>>>12&15]+v[b>>>8&15]+v[b>>>4&15]+v[b&15]+v[_>>>28&15]+v[_>>>24&15]+v[_>>>20&15]+v[_>>>16&15]+v[_>>>12&15]+v[_>>>8&15]+v[_>>>4&15]+v[_&15]+v[g>>>28&15]+v[g>>>24&15]+v[g>>>20&15]+v[g>>>16&15]+v[g>>>12&15]+v[g>>>8&15]+v[g>>>4&15]+v[g&15]+v[h>>>28&15]+v[h>>>24&15]+v[h>>>20&15]+v[h>>>16&15]+v[h>>>12&15]+v[h>>>8&15]+v[h>>>4&15]+v[h&15]+v[U>>>28&15]+v[U>>>24&15]+v[U>>>20&15]+v[U>>>16&15]+v[U>>>12&15]+v[U>>>8&15]+v[U>>>4&15]+v[U&15];return this.is224||(F+=v[f>>>28&15]+v[f>>>24&15]+v[f>>>20&15]+v[f>>>16&15]+v[f>>>12&15]+v[f>>>8&15]+v[f>>>4&15]+v[f&15]),F},P.prototype.toString=P.prototype.hex,P.prototype.digest=function(){this.finalize();var i=this.h0,p=this.h1,b=this.h2,_=this.h3,g=this.h4,h=this.h5,U=this.h6,f=this.h7,F=[i>>>24&255,i>>>16&255,i>>>8&255,i&255,p>>>24&255,p>>>16&255,p>>>8&255,p&255,b>>>24&255,b>>>16&255,b>>>8&255,b&255,_>>>24&255,_>>>16&255,_>>>8&255,_&255,g>>>24&255,g>>>16&255,g>>>8&255,g&255,h>>>24&255,h>>>16&255,h>>>8&255,h&255,U>>>24&255,U>>>16&255,U>>>8&255,U&255];return this.is224||F.push(f>>>24&255,f>>>16&255,f>>>8&255,f&255),F},P.prototype.array=P.prototype.digest,P.prototype.arrayBuffer=function(){this.finalize();var i=new ArrayBuffer(this.is224?28:32),p=new DataView(i);return p.setUint32(0,this.h0),p.setUint32(4,this.h1),p.setUint32(8,this.h2),p.setUint32(12,this.h3),p.setUint32(16,this.h4),p.setUint32(20,this.h5),p.setUint32(24,this.h6),this.is224||p.setUint32(28,this.h7),i};function te(i,p,b){var _,g=typeof i;if(g==="string"){var h=[],U=i.length,f=0,F;for(_=0;_<U;++_)F=i.charCodeAt(_),F<128?h[f++]=F:F<2048?(h[f++]=192|F>>>6,h[f++]=128|F&63):F<55296||F>=57344?(h[f++]=224|F>>>12,h[f++]=128|F>>>6&63,h[f++]=128|F&63):(F=65536+((F&1023)<<10|i.charCodeAt(++_)&1023),h[f++]=240|F>>>18,h[f++]=128|F>>>12&63,h[f++]=128|F>>>6&63,h[f++]=128|F&63);i=h}else if(g==="object"){if(i===null)throw new Error(e);if(C&&i.constructor===ArrayBuffer)i=new Uint8Array(i);else if(!Array.isArray(i)&&(!C||!ArrayBuffer.isView(i)))throw new Error(e)}else throw new Error(e);i.length>64&&(i=new P(p,!0).update(i).array());var L=[],B=[];for(_=0;_<64;++_){var $=i[_]||0;L[_]=92^$,B[_]=54^$}P.call(this,p,b),this.update(B),this.oKeyPad=L,this.inner=!0,this.sharedMemory=b}te.prototype=new P,te.prototype.finalize=function(){if(P.prototype.finalize.call(this),this.inner){this.inner=!1;var i=this.array();P.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(i),P.prototype.finalize.call(this)}};var D=de();D.sha256=D,D.sha224=de(!0),D.sha256.hmac=Y(),D.sha224.hmac=Y(!0),E?r.exports=D:(s.sha256=D.sha256,s.sha224=D.sha224)})()})(ye)),ye.exports}var lt=ft();const dt=at(lt);class se extends Error{}se.prototype.name="InvalidTokenError";function ht(r){return decodeURIComponent(atob(r).replace(/(.)/g,(e,o)=>{let s=o.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}function vt(r){let e=r.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return ht(e)}catch{return atob(e)}}function xe(r,e){if(typeof r!="string")throw new se("Invalid token specified: must be a string");e||(e={});const o=e.header===!0?0:1,s=r.split(".")[o];if(typeof s!="string")throw new se(`Invalid token specified: missing part #${o+1}`);let x;try{x=vt(s)}catch(w){throw new se(`Invalid token specified: invalid base64 for part #${o+1} (${w.message})`)}try{return JSON.parse(x)}catch(w){throw new se(`Invalid token specified: invalid json for part #${o+1} (${w.message})`)}}if(typeof Promise>"u")throw Error("Keycloak requires an environment that supports Promises. Make sure that you include the appropriate polyfill.");function Fe(r){if(!(this instanceof Fe))throw new Error("The 'Keycloak' constructor must be invoked with 'new'.");for(var e=this,o,s=[],x,w={enable:!0,callbackList:[],interval:5},E=document.getElementsByTagName("script"),C=0;C<E.length;C++)(E[C].src.indexOf("keycloak.js")!==-1||E[C].src.indexOf("keycloak.min.js")!==-1)&&E[C].src.indexOf("version=")!==-1&&(e.iframeVersion=E[C].src.substring(E[C].src.indexOf("version=")+8).split("&")[0]);var v=!0,H=q(console.info),M=q(console.warn);e.init=function(t){if(e.didInitialize)throw new Error("A 'Keycloak' instance can only be initialized once.");e.didInitialize=!0,e.authenticated=!1,x=A();var n=["default","cordova","cordova-native"];if(t&&n.indexOf(t.adapter)>-1?o=B(t.adapter):t&&typeof t.adapter=="object"?o=t.adapter:window.Cordova||window.cordova?o=B("cordova"):o=B(),t){if(typeof t.useNonce<"u"&&(v=t.useNonce),typeof t.checkLoginIframe<"u"&&(w.enable=t.checkLoginIframe),t.checkLoginIframeInterval&&(w.interval=t.checkLoginIframeInterval),t.onLoad==="login-required"&&(e.loginRequired=!0),t.responseMode)if(t.responseMode==="query"||t.responseMode==="fragment")e.responseMode=t.responseMode;else throw"Invalid value for responseMode";if(t.flow){switch(t.flow){case"standard":e.responseType="code";break;case"implicit":e.responseType="id_token token";break;case"hybrid":e.responseType="code id_token token";break;default:throw"Invalid value for flow"}e.flow=t.flow}if(t.timeSkew!=null&&(e.timeSkew=t.timeSkew),t.redirectUri&&(e.redirectUri=t.redirectUri),t.silentCheckSsoRedirectUri&&(e.silentCheckSsoRedirectUri=t.silentCheckSsoRedirectUri),typeof t.silentCheckSsoFallback=="boolean"?e.silentCheckSsoFallback=t.silentCheckSsoFallback:e.silentCheckSsoFallback=!0,typeof t.pkceMethod<"u"){if(t.pkceMethod!=="S256"&&t.pkceMethod!==!1)throw new TypeError(`Invalid value for pkceMethod', expected 'S256' or false but got ${t.pkceMethod}.`);e.pkceMethod=t.pkceMethod}else e.pkceMethod="S256";typeof t.enableLogging=="boolean"?e.enableLogging=t.enableLogging:e.enableLogging=!1,t.logoutMethod==="POST"?e.logoutMethod="POST":e.logoutMethod="GET",typeof t.scope=="string"&&(e.scope=t.scope),typeof t.acrValues=="string"&&(e.acrValues=t.acrValues),typeof t.messageReceiveTimeout=="number"&&t.messageReceiveTimeout>0?e.messageReceiveTimeout=t.messageReceiveTimeout:e.messageReceiveTimeout=1e4}e.responseMode||(e.responseMode="fragment"),e.responseType||(e.responseType="code",e.flow="standard");var c=g(),d=g();d.promise.then(function(){e.onReady&&e.onReady(e.authenticated),c.setSuccess(e.authenticated)}).catch(function(y){c.setError(y)});var a=P();function m(){var y=function(I){I||(S.prompt="none"),t&&t.locale&&(S.locale=t.locale),e.login(S).then(function(){d.setSuccess()}).catch(function(W){d.setError(W)})},k=function(){var I=document.createElement("iframe"),W=e.createLoginUrl({prompt:"none",redirectUri:e.silentCheckSsoRedirectUri});I.setAttribute("src",W),I.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"),I.setAttribute("title","keycloak-silent-check-sso"),I.style.display="none",document.body.appendChild(I);var Q=function(z){if(!(z.origin!==window.location.origin||I.contentWindow!==z.source)){var ae=p(z.data);Y(ae,d),document.body.removeChild(I),window.removeEventListener("message",Q)}};window.addEventListener("message",Q)},S={};switch(t.onLoad){case"check-sso":w.enable?U().then(function(){F().then(function(I){I?d.setSuccess():e.silentCheckSsoRedirectUri?k():y(!1)}).catch(function(I){d.setError(I)})}):e.silentCheckSsoRedirectUri?k():y(!1);break;case"login-required":y(!0);break;default:throw"Invalid value for onLoad"}}function u(){var y=p(window.location.href);if(y&&window.history.replaceState(window.history.state,null,y.newUrl),y&&y.valid)return U().then(function(){Y(y,d)}).catch(function(k){d.setError(k)});t?t.token&&t.refreshToken?(D(t.token,t.refreshToken,t.idToken),w.enable?U().then(function(){F().then(function(k){k?(e.onAuthSuccess&&e.onAuthSuccess(),d.setSuccess(),f()):d.setSuccess()}).catch(function(k){d.setError(k)})}):e.updateToken(-1).then(function(){e.onAuthSuccess&&e.onAuthSuccess(),d.setSuccess()}).catch(function(k){e.onAuthError&&e.onAuthError(),t.onLoad?m():d.setError(k)})):t.onLoad?m():d.setSuccess():d.setSuccess()}function l(){var y=g(),k=function(){(document.readyState==="interactive"||document.readyState==="complete")&&(document.removeEventListener("readystatechange",k),y.setSuccess())};return document.addEventListener("readystatechange",k),k(),y.promise}return a.then(function(){l().then(L).then(u).catch(function(y){c.setError(y)})}),a.catch(function(y){c.setError(y)}),c.promise},e.login=function(t){return o.login(t)};function X(t){var n=null,c=window.crypto||window.msCrypto;if(c&&c.getRandomValues&&window.Uint8Array)return n=new Uint8Array(t),c.getRandomValues(n),n;n=new Array(t);for(var d=0;d<n.length;d++)n[d]=Math.floor(256*Math.random());return n}function Z(t){return R(t,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789")}function R(t,n){for(var c=X(t),d=new Array(t),a=0;a<t;a++)d[a]=n.charCodeAt(c[a]%n.length);return String.fromCharCode.apply(null,d)}function le(t,n){if(t!=="S256")throw new TypeError(`Invalid value for 'pkceMethod', expected 'S256' but got '${t}'.`);const c=new Uint8Array(dt.arrayBuffer(n));return pt(c).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}function de(t){var n={id_token:{acr:t}};return JSON.stringify(n)}e.createLoginUrl=function(t){var n=i(),c=i(),d=o.redirectUri(t),a={state:n,nonce:c,redirectUri:encodeURIComponent(d),loginOptions:t};t&&t.prompt&&(a.prompt=t.prompt);var m;t&&t.action=="register"?m=e.endpoints.register():m=e.endpoints.authorize();var u=t&&t.scope||e.scope;u?u.indexOf("openid")===-1&&(u="openid "+u):u="openid";var l=m+"?client_id="+encodeURIComponent(e.clientId)+"&redirect_uri="+encodeURIComponent(d)+"&state="+encodeURIComponent(n)+"&response_mode="+encodeURIComponent(e.responseMode)+"&response_type="+encodeURIComponent(e.responseType)+"&scope="+encodeURIComponent(u);if(v&&(l=l+"&nonce="+encodeURIComponent(c)),t&&t.prompt&&(l+="&prompt="+encodeURIComponent(t.prompt)),t&&t.maxAge&&(l+="&max_age="+encodeURIComponent(t.maxAge)),t&&t.loginHint&&(l+="&login_hint="+encodeURIComponent(t.loginHint)),t&&t.idpHint&&(l+="&kc_idp_hint="+encodeURIComponent(t.idpHint)),t&&t.action&&t.action!="register"&&(l+="&kc_action="+encodeURIComponent(t.action)),t&&t.locale&&(l+="&ui_locales="+encodeURIComponent(t.locale)),t&&t.acr){var y=de(t.acr);l+="&claims="+encodeURIComponent(y)}if((t&&t.acrValues||e.acrValues)&&(l+="&acr_values="+encodeURIComponent(t.acrValues||e.acrValues)),e.pkceMethod){var k=Z(96);a.pkceCodeVerifier=k;var S=le(e.pkceMethod,k);l+="&code_challenge="+S,l+="&code_challenge_method="+e.pkceMethod}return x.add(a),l},e.logout=function(t){return o.logout(t)},e.createLogoutUrl=function(t){if((t?.logoutMethod??e.logoutMethod)==="POST")return e.endpoints.logout();var c=e.endpoints.logout()+"?client_id="+encodeURIComponent(e.clientId)+"&post_logout_redirect_uri="+encodeURIComponent(o.redirectUri(t,!1));return e.idToken&&(c+="&id_token_hint="+encodeURIComponent(e.idToken)),c},e.register=function(t){return o.register(t)},e.createRegisterUrl=function(t){return t||(t={}),t.action="register",e.createLoginUrl(t)},e.createAccountUrl=function(t){var n=V(),c=void 0;return typeof n<"u"&&(c=n+"/account?referrer="+encodeURIComponent(e.clientId)+"&referrer_uri="+encodeURIComponent(o.redirectUri(t))),c},e.accountManagement=function(){return o.accountManagement()},e.hasRealmRole=function(t){var n=e.realmAccess;return!!n&&n.roles.indexOf(t)>=0},e.hasResourceRole=function(t,n){if(!e.resourceAccess)return!1;var c=e.resourceAccess[n||e.clientId];return!!c&&c.roles.indexOf(t)>=0},e.loadUserProfile=function(){var t=V()+"/account",n=new XMLHttpRequest;n.open("GET",t,!0),n.setRequestHeader("Accept","application/json"),n.setRequestHeader("Authorization","bearer "+e.token);var c=g();return n.onreadystatechange=function(){n.readyState==4&&(n.status==200?(e.profile=JSON.parse(n.responseText),c.setSuccess(e.profile)):c.setError())},n.send(),c.promise},e.loadUserInfo=function(){var t=e.endpoints.userinfo(),n=new XMLHttpRequest;n.open("GET",t,!0),n.setRequestHeader("Accept","application/json"),n.setRequestHeader("Authorization","bearer "+e.token);var c=g();return n.onreadystatechange=function(){n.readyState==4&&(n.status==200?(e.userInfo=JSON.parse(n.responseText),c.setSuccess(e.userInfo)):c.setError())},n.send(),c.promise},e.isTokenExpired=function(t){if(!e.tokenParsed||!e.refreshToken&&e.flow!="implicit")throw"Not authenticated";if(e.timeSkew==null)return H("[KEYCLOAK] Unable to determine if token is expired as timeskew is not set"),!0;var n=e.tokenParsed.exp-Math.ceil(new Date().getTime()/1e3)+e.timeSkew;if(t){if(isNaN(t))throw"Invalid minValidity";n-=t}return n<0},e.updateToken=function(t){var n=g();if(!e.refreshToken)return n.setError(),n.promise;t=t||5;var c=function(){var a=!1;if(t==-1?(a=!0,H("[KEYCLOAK] Refreshing token: forced refresh")):(!e.tokenParsed||e.isTokenExpired(t))&&(a=!0,H("[KEYCLOAK] Refreshing token: token expired")),!a)n.setSuccess(!1);else{var m="grant_type=refresh_token&refresh_token="+e.refreshToken,u=e.endpoints.token();if(s.push(n),s.length==1){var l=new XMLHttpRequest;l.open("POST",u,!0),l.setRequestHeader("Content-type","application/x-www-form-urlencoded"),l.withCredentials=!0,m+="&client_id="+encodeURIComponent(e.clientId);var y=new Date().getTime();l.onreadystatechange=function(){if(l.readyState==4)if(l.status==200){H("[KEYCLOAK] Token refreshed"),y=(y+new Date().getTime())/2;var k=JSON.parse(l.responseText);D(k.access_token,k.refresh_token,k.id_token,y),e.onAuthRefreshSuccess&&e.onAuthRefreshSuccess();for(var S=s.pop();S!=null;S=s.pop())S.setSuccess(!0)}else{M("[KEYCLOAK] Failed to refresh token"),l.status==400&&e.clearToken(),e.onAuthRefreshError&&e.onAuthRefreshError();for(var S=s.pop();S!=null;S=s.pop())S.setError(!0)}},l.send(m)}}};if(w.enable){var d=F();d.then(function(){c()}).catch(function(a){n.setError(a)})}else c();return n.promise},e.clearToken=function(){e.token&&(D(null,null,null),e.onAuthLogout&&e.onAuthLogout(),e.loginRequired&&e.login())};function V(){if(typeof e.authServerUrl<"u")return e.authServerUrl.charAt(e.authServerUrl.length-1)=="/"?e.authServerUrl+"realms/"+encodeURIComponent(e.realm):e.authServerUrl+"/realms/"+encodeURIComponent(e.realm)}function he(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}function Y(t,n){var c=t.code,d=t.error,a=t.prompt,m=new Date().getTime();if(t.kc_action_status&&e.onActionUpdate&&e.onActionUpdate(t.kc_action_status),d){if(a!="none")if(t.error_description&&t.error_description==="authentication_expired")e.login(t.loginOptions);else{var u={error:d,error_description:t.error_description};e.onAuthError&&e.onAuthError(u),n&&n.setError(u)}else n&&n.setSuccess();return}else e.flow!="standard"&&(t.access_token||t.id_token)&&S(t.access_token,null,t.id_token,!0);if(e.flow!="implicit"&&c){var l="code="+c+"&grant_type=authorization_code",y=e.endpoints.token(),k=new XMLHttpRequest;k.open("POST",y,!0),k.setRequestHeader("Content-type","application/x-www-form-urlencoded"),l+="&client_id="+encodeURIComponent(e.clientId),l+="&redirect_uri="+t.redirectUri,t.pkceCodeVerifier&&(l+="&code_verifier="+t.pkceCodeVerifier),k.withCredentials=!0,k.onreadystatechange=function(){if(k.readyState==4)if(k.status==200){var I=JSON.parse(k.responseText);S(I.access_token,I.refresh_token,I.id_token,e.flow==="standard"),f()}else e.onAuthError&&e.onAuthError(),n&&n.setError()},k.send(l)}function S(I,W,Q,z){m=(m+new Date().getTime())/2,D(I,W,Q,m),v&&e.idTokenParsed&&e.idTokenParsed.nonce!=t.storedNonce?(H("[KEYCLOAK] Invalid nonce, clearing token"),e.clearToken(),n&&n.setError()):z&&(e.onAuthSuccess&&e.onAuthSuccess(),n&&n.setSuccess())}}function P(t){var n=g(),c;r?typeof r=="string"&&(c=r):c="keycloak.json";function d(k){k?e.endpoints={authorize:function(){return k.authorization_endpoint},token:function(){return k.token_endpoint},logout:function(){if(!k.end_session_endpoint)throw"Not supported by the OIDC server";return k.end_session_endpoint},checkSessionIframe:function(){if(!k.check_session_iframe)throw"Not supported by the OIDC server";return k.check_session_iframe},register:function(){throw'Redirection to "Register user" page not supported in standard OIDC mode'},userinfo:function(){if(!k.userinfo_endpoint)throw"Not supported by the OIDC server";return k.userinfo_endpoint}}:e.endpoints={authorize:function(){return V()+"/protocol/openid-connect/auth"},token:function(){return V()+"/protocol/openid-connect/token"},logout:function(){return V()+"/protocol/openid-connect/logout"},checkSessionIframe:function(){var S=V()+"/protocol/openid-connect/login-status-iframe.html";return e.iframeVersion&&(S=S+"?version="+e.iframeVersion),S},thirdPartyCookiesIframe:function(){var S=V()+"/protocol/openid-connect/3p-cookies/step1.html";return e.iframeVersion&&(S=S+"?version="+e.iframeVersion),S},register:function(){return V()+"/protocol/openid-connect/registrations"},userinfo:function(){return V()+"/protocol/openid-connect/userinfo"}}}if(c){var a=new XMLHttpRequest;a.open("GET",c,!0),a.setRequestHeader("Accept","application/json"),a.onreadystatechange=function(){if(a.readyState==4)if(a.status==200||te(a)){var k=JSON.parse(a.responseText);e.authServerUrl=k["auth-server-url"],e.realm=k.realm,e.clientId=k.resource,d(null),n.setSuccess()}else n.setError()},a.send()}else{if(!r.clientId)throw"clientId missing";e.clientId=r.clientId;var m=r.oidcProvider;if(m)if(typeof m=="string"){var y;m.charAt(m.length-1)=="/"?y=m+".well-known/openid-configuration":y=m+"/.well-known/openid-configuration";var a=new XMLHttpRequest;a.open("GET",y,!0),a.setRequestHeader("Accept","application/json"),a.onreadystatechange=function(){if(a.readyState==4)if(a.status==200||te(a)){var S=JSON.parse(a.responseText);d(S),n.setSuccess()}else n.setError()},a.send()}else d(m),n.setSuccess();else{if(!r.url){for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++)if(u[l].src.match(/.*keycloak\.js/)){r.url=u[l].src.substr(0,u[l].src.indexOf("/js/keycloak.js"));break}}if(!r.realm)throw"realm missing";e.authServerUrl=r.url,e.realm=r.realm,d(null),n.setSuccess()}}return n.promise}function te(t){return t.status==0&&t.responseText&&t.responseURL.startsWith("file:")}function D(t,n,c,d){if(e.tokenTimeoutHandle&&(clearTimeout(e.tokenTimeoutHandle),e.tokenTimeoutHandle=null),n?(e.refreshToken=n,e.refreshTokenParsed=xe(n)):(delete e.refreshToken,delete e.refreshTokenParsed),c?(e.idToken=c,e.idTokenParsed=xe(c)):(delete e.idToken,delete e.idTokenParsed),t){if(e.token=t,e.tokenParsed=xe(t),e.sessionId=e.tokenParsed.sid,e.authenticated=!0,e.subject=e.tokenParsed.sub,e.realmAccess=e.tokenParsed.realm_access,e.resourceAccess=e.tokenParsed.resource_access,d&&(e.timeSkew=Math.floor(d/1e3)-e.tokenParsed.iat),e.timeSkew!=null&&(H("[KEYCLOAK] Estimated time difference between browser and server is "+e.timeSkew+" seconds"),e.onTokenExpired)){var a=(e.tokenParsed.exp-new Date().getTime()/1e3+e.timeSkew)*1e3;H("[KEYCLOAK] Token expires in "+Math.round(a/1e3)+" s"),a<=0?e.onTokenExpired():e.tokenTimeoutHandle=setTimeout(e.onTokenExpired,a)}}else delete e.token,delete e.tokenParsed,delete e.subject,delete e.realmAccess,delete e.resourceAccess,e.authenticated=!1}function i(){var t="0123456789abcdef",n=R(36,t).split("");n[14]="4",n[19]=t.substr(n[19]&3|8,1),n[8]=n[13]=n[18]=n[23]="-";var c=n.join("");return c}function p(t){var n=b(t);if(n){var c=x.get(n.state);return c&&(n.valid=!0,n.redirectUri=c.redirectUri,n.storedNonce=c.nonce,n.prompt=c.prompt,n.pkceCodeVerifier=c.pkceCodeVerifier,n.loginOptions=c.loginOptions),n}}function b(t){var n;switch(e.flow){case"standard":n=["code","state","session_state","kc_action_status","iss"];break;case"implicit":n=["access_token","token_type","id_token","state","session_state","expires_in","kc_action_status","iss"];break;case"hybrid":n=["access_token","token_type","id_token","code","state","session_state","expires_in","kc_action_status","iss"];break}n.push("error"),n.push("error_description"),n.push("error_uri");var c=t.indexOf("?"),d=t.indexOf("#"),a,m;if(e.responseMode==="query"&&c!==-1?(a=t.substring(0,c),m=_(t.substring(c+1,d!==-1?d:t.length),n),m.paramsString!==""&&(a+="?"+m.paramsString),d!==-1&&(a+=t.substring(d))):e.responseMode==="fragment"&&d!==-1&&(a=t.substring(0,d),m=_(t.substring(d+1),n),m.paramsString!==""&&(a+="#"+m.paramsString)),m&&m.oauthParams){if(e.flow==="standard"||e.flow==="hybrid"){if((m.oauthParams.code||m.oauthParams.error)&&m.oauthParams.state)return m.oauthParams.newUrl=a,m.oauthParams}else if(e.flow==="implicit"&&(m.oauthParams.access_token||m.oauthParams.error)&&m.oauthParams.state)return m.oauthParams.newUrl=a,m.oauthParams}}function _(t,n){for(var c=t.split("&"),d={paramsString:"",oauthParams:{}},a=0;a<c.length;a++){var m=c[a].indexOf("="),u=c[a].slice(0,m);n.indexOf(u)!==-1?d.oauthParams[u]=c[a].slice(m+1):(d.paramsString!==""&&(d.paramsString+="&"),d.paramsString+=c[a])}return d}function g(){var t={setSuccess:function(n){t.resolve(n)},setError:function(n){t.reject(n)}};return t.promise=new Promise(function(n,c){t.resolve=n,t.reject=c}),t}function h(t,n,c){var d=null,a=new Promise(function(m,u){d=setTimeout(function(){u({error:c})},n)});return Promise.race([t,a]).finally(function(){clearTimeout(d)})}function U(){var t=g();if(!w.enable||w.iframe)return t.setSuccess(),t.promise;var n=document.createElement("iframe");w.iframe=n,n.onload=function(){var a=e.endpoints.authorize();a.charAt(0)==="/"?w.iframeOrigin=he():w.iframeOrigin=a.substring(0,a.indexOf("/",8)),t.setSuccess()};var c=e.endpoints.checkSessionIframe();n.setAttribute("src",c),n.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"),n.setAttribute("title","keycloak-session-iframe"),n.style.display="none",document.body.appendChild(n);var d=function(a){if(!(a.origin!==w.iframeOrigin||w.iframe.contentWindow!==a.source)&&(a.data=="unchanged"||a.data=="changed"||a.data=="error")){a.data!="unchanged"&&e.clearToken();for(var m=w.callbackList.splice(0,w.callbackList.length),u=m.length-1;u>=0;--u){var l=m[u];a.data=="error"?l.setError():l.setSuccess(a.data=="unchanged")}}};return window.addEventListener("message",d,!1),t.promise}function f(){w.enable&&e.token&&setTimeout(function(){F().then(function(t){t&&f()})},w.interval*1e3)}function F(){var t=g();if(w.iframe&&w.iframeOrigin){var n=e.clientId+" "+(e.sessionId?e.sessionId:"");w.callbackList.push(t);var c=w.iframeOrigin;w.callbackList.length==1&&w.iframe.contentWindow.postMessage(n,c)}else t.setSuccess();return t.promise}function L(){var t=g();if(w.enable||e.silentCheckSsoRedirectUri){var n=document.createElement("iframe");n.setAttribute("src",e.endpoints.thirdPartyCookiesIframe()),n.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"),n.setAttribute("title","keycloak-3p-check-iframe"),n.style.display="none",document.body.appendChild(n);var c=function(d){n.contentWindow===d.source&&(d.data!=="supported"&&d.data!=="unsupported"||(d.data==="unsupported"&&(M(`[KEYCLOAK] Your browser is blocking access to 3rd-party cookies, this means:

 - It is not possible to retrieve tokens without redirecting to the Keycloak server (a.k.a. no support for silent authentication).
 - It is not possible to automatically detect changes to the session status (such as the user logging out in another tab).

For more information see: https://www.keycloak.org/docs/latest/securing_apps/#_modern_browsers`),w.enable=!1,e.silentCheckSsoFallback&&(e.silentCheckSsoRedirectUri=!1)),document.body.removeChild(n),window.removeEventListener("message",c),t.setSuccess()))};window.addEventListener("message",c,!1)}else t.setSuccess();return h(t.promise,e.messageReceiveTimeout,"Timeout when waiting for 3rd party check iframe message.")}function B(t){if(!t||t=="default")return{login:function(u){return window.location.assign(e.createLoginUrl(u)),g().promise},logout:async function(u){if((u?.logoutMethod??e.logoutMethod)==="GET"){window.location.replace(e.createLogoutUrl(u));return}const y=e.createLogoutUrl(u),k=await fetch(y,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id_token_hint:e.idToken,client_id:e.clientId,post_logout_redirect_uri:o.redirectUri(u,!1)})});if(k.redirected){window.location.href=k.url;return}if(k.ok){window.location.reload();return}throw new Error("Logout failed, request returned an error code.")},register:function(u){return window.location.assign(e.createRegisterUrl(u)),g().promise},accountManagement:function(){var u=e.createAccountUrl();if(typeof u<"u")window.location.href=u;else throw"Not supported by the OIDC server";return g().promise},redirectUri:function(u,l){return u&&u.redirectUri?u.redirectUri:e.redirectUri?e.redirectUri:location.href}};if(t=="cordova"){w.enable=!1;var n=function(u,l,y){return window.cordova&&window.cordova.InAppBrowser?window.cordova.InAppBrowser.open(u,l,y):window.open(u,l,y)},c=function(u){return u&&u.cordovaOptions?Object.keys(u.cordovaOptions).reduce(function(l,y){return l[y]=u.cordovaOptions[y],l},{}):{}},d=function(u){return Object.keys(u).reduce(function(l,y){return l.push(y+"="+u[y]),l},[]).join(",")},a=function(u){var l=c(u);return l.location="no",u&&u.prompt=="none"&&(l.hidden="yes"),d(l)},m=function(){return e.redirectUri||"http://localhost"};return{login:function(u){var l=g(),y=a(u),k=e.createLoginUrl(u),S=n(k,"_blank",y),I=!1,W=!1,Q=function(){W=!0,S.close()};return S.addEventListener("loadstart",function(z){if(z.url.indexOf(m())==0){var ae=p(z.url);Y(ae,l),Q(),I=!0}}),S.addEventListener("loaderror",function(z){if(!I)if(z.url.indexOf(m())==0){var ae=p(z.url);Y(ae,l),Q(),I=!0}else l.setError(),Q()}),S.addEventListener("exit",function(z){W||l.setError({reason:"closed_by_user"})}),l.promise},logout:function(u){var l=g(),y=e.createLogoutUrl(u),k=n(y,"_blank","location=no,hidden=yes,clearcache=yes"),S;return k.addEventListener("loadstart",function(I){I.url.indexOf(m())==0&&k.close()}),k.addEventListener("loaderror",function(I){I.url.indexOf(m())==0||(S=!0),k.close()}),k.addEventListener("exit",function(I){S?l.setError():(e.clearToken(),l.setSuccess())}),l.promise},register:function(u){var l=g(),y=e.createRegisterUrl(),k=a(u),S=n(y,"_blank",k);return S.addEventListener("loadstart",function(I){if(I.url.indexOf(m())==0){S.close();var W=p(I.url);Y(W,l)}}),l.promise},accountManagement:function(){var u=e.createAccountUrl();if(typeof u<"u"){var l=n(u,"_blank","location=no");l.addEventListener("loadstart",function(y){y.url.indexOf(m())==0&&l.close()})}else throw"Not supported by the OIDC server"},redirectUri:function(u){return m()}}}if(t=="cordova-native")return w.enable=!1,{login:function(u){var l=g(),y=e.createLoginUrl(u);return universalLinks.subscribe("keycloak",function(k){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var S=p(k.url);Y(S,l)}),window.cordova.plugins.browsertab.openUrl(y),l.promise},logout:function(u){var l=g(),y=e.createLogoutUrl(u);return universalLinks.subscribe("keycloak",function(k){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),e.clearToken(),l.setSuccess()}),window.cordova.plugins.browsertab.openUrl(y),l.promise},register:function(u){var l=g(),y=e.createRegisterUrl(u);return universalLinks.subscribe("keycloak",function(k){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var S=p(k.url);Y(S,l)}),window.cordova.plugins.browsertab.openUrl(y),l.promise},accountManagement:function(){var u=e.createAccountUrl();if(typeof u<"u")window.cordova.plugins.browsertab.openUrl(u);else throw"Not supported by the OIDC server"},redirectUri:function(u){return u&&u.redirectUri?u.redirectUri:e.redirectUri?e.redirectUri:"http://localhost"}};throw"invalid adapter type: "+t}var $=function(){if(!(this instanceof $))return new $;localStorage.setItem("kc-test","test"),localStorage.removeItem("kc-test");var t=this;function n(){for(var c=new Date().getTime(),d=0;d<localStorage.length;d++){var a=localStorage.key(d);if(a&&a.indexOf("kc-callback-")==0){var m=localStorage.getItem(a);if(m)try{var u=JSON.parse(m).expires;(!u||u<c)&&localStorage.removeItem(a)}catch{localStorage.removeItem(a)}}}}t.get=function(c){if(c){var d="kc-callback-"+c,a=localStorage.getItem(d);return a&&(localStorage.removeItem(d),a=JSON.parse(a)),n(),a}},t.add=function(c){n();var d="kc-callback-"+c.state;c.expires=new Date().getTime()+3600*1e3,localStorage.setItem(d,JSON.stringify(c))}},J=function(){if(!(this instanceof J))return new J;var t=this;t.get=function(a){if(a){var m=c("kc-callback-"+a);if(d("kc-callback-"+a,"",n(-100)),m)return JSON.parse(m)}},t.add=function(a){d("kc-callback-"+a.state,JSON.stringify(a),n(60))},t.removeItem=function(a){d(a,"",n(-100))};var n=function(a){var m=new Date;return m.setTime(m.getTime()+a*60*1e3),m},c=function(a){for(var m=a+"=",u=document.cookie.split(";"),l=0;l<u.length;l++){for(var y=u[l];y.charAt(0)==" ";)y=y.substring(1);if(y.indexOf(m)==0)return y.substring(m.length,y.length)}return""},d=function(a,m,u){var l=a+"="+m+"; expires="+u.toUTCString()+"; ";document.cookie=l}};function A(){try{return new $}catch{}return new J}function q(t){return function(){e.enableLogging&&t.apply(console,Array.prototype.slice.call(arguments))}}}function pt(r){const e=String.fromCodePoint(...r);return btoa(e)}var fe,Ke;function _t(r){return r.children}fe={__e:function(r,e,o,s){for(var x,w,E;e=e.__;)if((x=e.__c)&&!x.__)try{if((w=x.constructor)&&w.getDerivedStateFromError!=null&&(x.setState(w.getDerivedStateFromError(r)),E=x.__d),x.componentDidCatch!=null&&(x.componentDidCatch(r,s||{}),E=x.__d),E)return x.__E=x}catch(C){r=C}throw r}},Ke=function(r){return r!=null&&r.constructor==null},typeof Promise=="function"&&Promise.prototype.then.bind(Promise.resolve());var Ue,K,be,Le,Me=0,Je=[],N=fe,Pe=N.__b,He=N.__r,Ne=N.diffed,Oe=N.__c,Be=N.unmount,$e=N.__;function mt(r,e){N.__h&&N.__h(K,r,Me||e),Me=0;var o=K.__H||(K.__H={__:[],__h:[]});return r>=o.__.length&&o.__.push({}),o.__[r]}function ze(r,e){var o=mt(Ue++,7);return wt(o.__H,e)&&(o.__=r(),o.__H=e,o.__h=r),o.__}function gt(){for(var r;r=Je.shift();)if(r.__P&&r.__H)try{r.__H.__h.forEach(me),r.__H.__h.forEach(Ae),r.__H.__h=[]}catch(e){r.__H.__h=[],N.__e(e,r.__v)}}N.__b=function(r){K=null,Pe&&Pe(r)},N.__=function(r,e){r&&e.__k&&e.__k.__m&&(r.__m=e.__k.__m),$e&&$e(r,e)},N.__r=function(r){He&&He(r),Ue=0;var e=(K=r.__c).__H;e&&(be===K?(e.__h=[],K.__h=[],e.__.forEach(function(o){o.__N&&(o.__=o.__N),o.u=o.__N=void 0})):(e.__h.forEach(me),e.__h.forEach(Ae),e.__h=[],Ue=0)),be=K},N.diffed=function(r){Ne&&Ne(r);var e=r.__c;e&&e.__H&&(e.__H.__h.length&&(Je.push(e)!==1&&Le===N.requestAnimationFrame||((Le=N.requestAnimationFrame)||kt)(gt)),e.__H.__.forEach(function(o){o.u&&(o.__H=o.u),o.u=void 0})),be=K=null},N.__c=function(r,e){e.some(function(o){try{o.__h.forEach(me),o.__h=o.__h.filter(function(s){return!s.__||Ae(s)})}catch(s){e.some(function(x){x.__h&&(x.__h=[])}),e=[],N.__e(s,o.__v)}}),Oe&&Oe(r,e)},N.unmount=function(r){Be&&Be(r);var e,o=r.__c;o&&o.__H&&(o.__H.__.forEach(function(s){try{me(s)}catch(x){e=x}}),o.__H=void 0,e&&N.__e(e,o.__v))};var je=typeof requestAnimationFrame=="function";function kt(r){var e,o=function(){clearTimeout(s),je&&cancelAnimationFrame(e),setTimeout(r)},s=setTimeout(o,35);je&&(e=requestAnimationFrame(o))}function me(r){var e=K,o=r.__c;typeof o=="function"&&(r.__c=void 0,o()),K=e}function Ae(r){var e=K;r.__c=r.__(),K=e}function wt(r,e){return!r||r.length!==e.length||e.some(function(o,s){return o!==r[s]})}var yt=Symbol.for("preact-signals");function we(){if(ee>1)ee--;else{for(var r,e=!1;ce!==void 0;){var o=ce;for(ce=void 0,Ee++;o!==void 0;){var s=o.o;if(o.o=void 0,o.f&=-3,!(8&o.f)&&Ye(o))try{o.c()}catch(x){e||(r=x,e=!0)}o=s}}if(Ee=0,ee--,e)throw r}}function xt(r){if(ee>0)return r();ee++;try{return r()}finally{we()}}var T=void 0;function Ve(r){var e=T;T=void 0;try{return r()}finally{T=e}}var ce=void 0,ee=0,Ee=0,ge=0;function qe(r){if(T!==void 0){var e=r.n;if(e===void 0||e.t!==T)return e={i:0,S:r,p:T.s,n:void 0,t:T,e:void 0,x:void 0,r:e},T.s!==void 0&&(T.s.n=e),T.s=e,r.n=e,32&T.f&&r.S(e),e;if(e.i===-1)return e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=T.s,e.n=void 0,T.s.n=e,T.s=e),e}}function j(r,e){this.v=r,this.i=0,this.n=void 0,this.t=void 0,this.W=e?.watched,this.Z=e?.unwatched}j.prototype.brand=yt;j.prototype.h=function(){return!0};j.prototype.S=function(r){var e=this,o=this.t;o!==r&&r.e===void 0&&(r.x=o,this.t=r,o!==void 0?o.e=r:Ve(function(){var s;(s=e.W)==null||s.call(e)}))};j.prototype.U=function(r){var e=this;if(this.t!==void 0){var o=r.e,s=r.x;o!==void 0&&(o.x=s,r.e=void 0),s!==void 0&&(s.e=o,r.x=void 0),r===this.t&&(this.t=s,s===void 0&&Ve(function(){var x;(x=e.Z)==null||x.call(e)}))}};j.prototype.subscribe=function(r){var e=this;return ne(function(){var o=e.value,s=T;T=void 0;try{r(o)}finally{T=s}})};j.prototype.valueOf=function(){return this.value};j.prototype.toString=function(){return this.value+""};j.prototype.toJSON=function(){return this.value};j.prototype.peek=function(){var r=T;T=void 0;try{return this.value}finally{T=r}};Object.defineProperty(j.prototype,"value",{get:function(){var r=qe(this);return r!==void 0&&(r.i=this.i),this.v},set:function(r){if(r!==this.v){if(Ee>100)throw new Error("Cycle detected");this.v=r,this.i++,ge++,ee++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{we()}}}});function ue(r,e){return new j(r,e)}function Ye(r){for(var e=r.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function We(r){for(var e=r.s;e!==void 0;e=e.n){var o=e.S.n;if(o!==void 0&&(e.r=o),e.S.n=e,e.i=-1,e.n===void 0){r.s=e;break}}}function Ge(r){for(var e=r.s,o=void 0;e!==void 0;){var s=e.p;e.i===-1?(e.S.U(e),s!==void 0&&(s.n=e.n),e.n!==void 0&&(e.n.p=s)):o=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=s}r.s=o}function re(r,e){j.call(this,void 0),this.x=r,this.s=void 0,this.g=ge-1,this.f=4,this.W=e?.watched,this.Z=e?.unwatched}re.prototype=new j;re.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===ge))return!0;if(this.g=ge,this.f|=1,this.i>0&&!Ye(this))return this.f&=-2,!0;var r=T;try{We(this),T=this;var e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(o){this.v=o,this.f|=16,this.i++}return T=r,Ge(this),this.f&=-2,!0};re.prototype.S=function(r){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}j.prototype.S.call(this,r)};re.prototype.U=function(r){if(this.t!==void 0&&(j.prototype.U.call(this,r),this.t===void 0)){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}};re.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var r=this.t;r!==void 0;r=r.x)r.t.N()}};Object.defineProperty(re.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var r=qe(this);if(this.h(),r!==void 0&&(r.i=this.i),16&this.f)throw this.v;return this.v}});function De(r,e){return new re(r,e)}function Xe(r){var e=r.u;if(r.u=void 0,typeof e=="function"){ee++;var o=T;T=void 0;try{e()}catch(s){throw r.f&=-2,r.f|=8,Te(r),s}finally{T=o,we()}}}function Te(r){for(var e=r.s;e!==void 0;e=e.n)e.S.U(e);r.x=void 0,r.s=void 0,Xe(r)}function bt(r){if(T!==this)throw new Error("Out-of-order effect");Ge(this),T=r,this.f&=-2,8&this.f&&Te(this),we()}function oe(r){this.x=r,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}oe.prototype.c=function(){var r=this.S();try{if(8&this.f||this.x===void 0)return;var e=this.x();typeof e=="function"&&(this.u=e)}finally{r()}};oe.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,Xe(this),We(this),ee++;var r=T;return T=this,bt.bind(this,r)};oe.prototype.N=function(){2&this.f||(this.f|=2,this.o=ce,ce=this)};oe.prototype.d=function(){this.f|=8,1&this.f||Te(this)};oe.prototype.dispose=function(){this.d()};function ne(r){var e=new oe(r);try{e.c()}catch(s){throw e.d(),s}var o=e.d.bind(e);return o[Symbol.dispose]=o,o}var Ze,Se,Qe=[];ne(function(){Ze=this.N})();function ie(r,e){fe[r]=e.bind(null,fe[r]||function(){})}function ke(r){Se&&Se(),Se=r&&r.S()}function et(r){var e=this,o=r.data,s=Ft(o);s.value=o;var x=ze(function(){for(var C=e,v=e.__v;v=v.__;)if(v.__c){v.__c.__$f|=4;break}var H=De(function(){var R=s.value.value;return R===0?0:R===!0?"":R||""}),M=De(function(){return!Array.isArray(H.value)&&!Ke(H.value)}),X=ne(function(){if(this.N=tt,M.value){var R=H.value;C.__v&&C.__v.__e&&C.__v.__e.nodeType===3&&(C.__v.__e.data=R)}}),Z=e.__$u.d;return e.__$u.d=function(){X(),Z.call(this)},[M,H]},[]),w=x[0],E=x[1];return w.value?E.peek():E.value}et.displayName="_st";Object.defineProperties(j.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:et},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});ie("__b",function(r,e){if(typeof e.type=="string"){var o,s=e.props;for(var x in s)if(x!=="children"){var w=s[x];w instanceof j&&(o||(e.__np=o={}),o[x]=w,s[x]=w.peek())}}r(e)});ie("__r",function(r,e){if(e.type!==_t){ke();var o,s=e.__c;s&&(s.__$f&=-2,(o=s.__$u)===void 0&&(s.__$u=o=(function(x){var w;return ne(function(){w=this}),w.c=function(){s.__$f|=1,s.setState({})},w})())),ke(o)}r(e)});ie("__e",function(r,e,o,s){ke(),r(e,o,s)});ie("diffed",function(r,e){ke();var o;if(typeof e.type=="string"&&(o=e.__e)){var s=e.__np,x=e.props;if(s){var w=o.U;if(w)for(var E in w){var C=w[E];C!==void 0&&!(E in s)&&(C.d(),w[E]=void 0)}else w={},o.U=w;for(var v in s){var H=w[v],M=s[v];H===void 0?(H=St(o,v,M,x),w[v]=H):H.o(M,x)}}}r(e)});function St(r,e,o,s){var x=e in r&&r.ownerSVGElement===void 0,w=ue(o);return{o:function(E,C){w.value=E,s=C},d:ne(function(){this.N=tt;var E=w.value.value;s[e]!==E&&(s[e]=E,x?r[e]=E:E?r.setAttribute(e,E):r.removeAttribute(e))})}}ie("unmount",function(r,e){if(typeof e.type=="string"){var o=e.__e;if(o){var s=o.U;if(s){o.U=void 0;for(var x in s){var w=s[x];w&&w.d()}}}}else{var E=e.__c;if(E){var C=E.__$u;C&&(E.__$u=void 0,C.d())}}r(e)});ie("__h",function(r,e,o,s){(s<3||s===9)&&(e.__$f|=2),r(e,o,s)});function Ft(r,e){return ze(function(){return ue(r,e)},[])}var Ut=function(r){queueMicrotask(function(){queueMicrotask(r)})};function At(){xt(function(){for(var r;r=Qe.shift();)Ze.call(r)})}function tt(){Qe.push(this)===1&&(fe.requestAnimationFrame||Ut)(At)}const Ie=document.getElementById("login"),ve=document.getElementById("logout"),pe=document.getElementById("userinfo"),_e=document.getElementById("callapi"),Et=document.getElementById("switch"),O=(function(){let r={kc:new Fe({url:"http://eservice.localhost/auth",realm:"agency-realm",clientId:"aceas-spa"}),isAuthenticated:ue(!1),isLoading:ue(0),userInfo:ue(null)};return{...r,kcInit:async()=>{try{return await r.kc.init({onLoad:"check-sso",checkLoginIframe:!1,pkceMethod:"S256",flow:"standard",redirectUri:window.location.href})}catch{return r.kc=new Fe({url:"http://eservice.localhost/auth",realm:"agency-realm",clientId:"aceas-spa"}),await r.kc.init({onLoad:"login-required",checkLoginIframe:!1,pkceMethod:"S256",flow:"standard",redirectUri:window.location.href})}finally{r.kc.onTokenExpired=async()=>{try{await r.kc.updateToken(30),G("out","Token refreshed")}catch(e){G("out","Token refresh failed: "+e)}}}}}})();ne(()=>{console.log("is authencticated changes: ",O.isAuthenticated.value),O.isAuthenticated.value===!0?(Ie.style.display="none",ve.style.display="inline-block",pe.style.display="inline-block",_e.style.display="inline-block",!ve.onclick&&(ve.onclick=()=>{O.kc.logout({redirectUri:window.location.origin+"/aceas/"})}),!pe.onclick&&(pe.onclick=async()=>{if(!O.kc.authenticated)return G("out","Not logged in");const e=await(await fetch("http://eservice.localhost/auth/realms/agency-realm/protocol/openid-connect/userinfo",{headers:{Authorization:"Bearer "+O.kc.token}})).json();O.userInfo.value=e,G("out","userinfo: "+JSON.stringify(e,null,2))}),!_e.onclick&&(_e.onclick=async()=>{if(!O.kc.authenticated)return G("out","Login first");const r=await rt("/aceas/api/hello",O.kc.token);G("out",`ACEAS API [${r.status}]:
${r.body}`)})):(Ie.style.display="inline-block",ve.style.display="none",pe.style.display="none",_e.style.display="none")});ne(()=>{O.isLoading.value==!0?nt():ot()});It();async function It(){console.log("init main");try{O.isLoading.value=!0,Ie.onclick=()=>{console.log("Logging in..."),O.kc.login()},Et.onclick=()=>{const e=encodeURIComponent("/cpds/");window.location.href="/cpds/#switcher"};const r=await O.kcInit();O.isAuthenticated.value=O.kc.authenticated??r,O.isAuthenticated.value?G("out","Authenticated."):(G("out","Not authenticated."),window.location.hash.includes("switcher")&&(console.log("Switching"),O.kc.login()))}catch(r){O.isAuthenticated.value=!1,console.log(r),G("out","Init error: "+r)}finally{O.isLoading.value=!1}}
