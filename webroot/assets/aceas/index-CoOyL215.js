import"../modulepreload-polyfill-B5Qt9EMX.js";/* empty css                */import{s as ce,l as V,h as le,c as ue}from"../sched-DruKi8Dd.js";var fe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function de(k){return k&&k.__esModule&&Object.prototype.hasOwnProperty.call(k,"default")?k.default:k}function he(k){if(Object.prototype.hasOwnProperty.call(k,"__esModule"))return k;var e=k.default;if(typeof e=="function"){var S=function F(){var L=!1;try{L=this instanceof F}catch{}return L?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};S.prototype=e.prototype}else S={};return Object.defineProperty(S,"__esModule",{value:!0}),Object.keys(k).forEach(function(F){var L=Object.getOwnPropertyDescriptor(k,F);Object.defineProperty(S,F,L.get?L:{enumerable:!0,get:function(){return k[F]}})}),S}var te={exports:{}};const pe={},ve=Object.freeze(Object.defineProperty({__proto__:null,default:pe},Symbol.toStringTag,{value:"Module"})),oe=he(ve);/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.11.1
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2025
 * @license MIT
 */var ae;function me(){return ae||(ae=1,(function(k){(function(){var e="input is invalid type",S=typeof window=="object",F=S?window:{};F.JS_SHA256_NO_WINDOW&&(S=!1);var L=!S&&typeof self=="object",_=!F.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node&&process.type!="renderer";_?F=fe:L&&(F=self);var Y=!F.JS_SHA256_NO_COMMON_JS&&!0&&k.exports,P=!F.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",p="0123456789abcdef".split(""),z=[-2147483648,8388608,32768,128],M=[24,16,8,0],q=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],X=["hex","array","digest","arrayBuffer"],I=[];(F.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(n){return Object.prototype.toString.call(n)==="[object Array]"}),P&&(F.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(n){return typeof n=="object"&&n.buffer&&n.buffer.constructor===ArrayBuffer});var Z=function(n,f){return function(x){return new T(f,!0).update(x)[n]()}},ee=function(n){var f=Z("hex",n);_&&(f=j(f,n)),f.create=function(){return new T(n)},f.update=function(v){return f.create().update(v)};for(var x=0;x<X.length;++x){var d=X[x];f[d]=Z(d,n)}return f},j=function(n,f){var x=oe,d=oe.Buffer,v=f?"sha224":"sha256",u;d.from&&!F.JS_SHA256_NO_BUFFER_FROM?u=d.from:u=function(s){return new d(s)};var y=function(s){if(typeof s=="string")return x.createHash(v).update(s,"utf8").digest("hex");if(s==null)throw new Error(e);return s.constructor===ArrayBuffer&&(s=new Uint8Array(s)),Array.isArray(s)||ArrayBuffer.isView(s)||s.constructor===d?x.createHash(v).update(u(s)).digest("hex"):n(s)};return y},re=function(n,f){return function(x,d){return new W(x,f,!0).update(d)[n]()}},K=function(n){var f=re("hex",n);f.create=function(v){return new W(v,n)},f.update=function(v,u){return f.create(v).update(u)};for(var x=0;x<X.length;++x){var d=X[x];f[d]=re(d,n)}return f};function T(n,f){f?(I[0]=I[16]=I[1]=I[2]=I[3]=I[4]=I[5]=I[6]=I[7]=I[8]=I[9]=I[10]=I[11]=I[12]=I[13]=I[14]=I[15]=0,this.blocks=I):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=n}T.prototype.update=function(n){if(!this.finalized){var f,x=typeof n;if(x!=="string"){if(x==="object"){if(n===null)throw new Error(e);if(P&&n.constructor===ArrayBuffer)n=new Uint8Array(n);else if(!Array.isArray(n)&&(!P||!ArrayBuffer.isView(n)))throw new Error(e)}else throw new Error(e);f=!0}for(var d,v=0,u,y=n.length,s=this.blocks;v<y;){if(this.hashed&&(this.hashed=!1,s[0]=this.block,this.block=s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),f)for(u=this.start;v<y&&u<64;++v)s[u>>>2]|=n[v]<<M[u++&3];else for(u=this.start;v<y&&u<64;++v)d=n.charCodeAt(v),d<128?s[u>>>2]|=d<<M[u++&3]:d<2048?(s[u>>>2]|=(192|d>>>6)<<M[u++&3],s[u>>>2]|=(128|d&63)<<M[u++&3]):d<55296||d>=57344?(s[u>>>2]|=(224|d>>>12)<<M[u++&3],s[u>>>2]|=(128|d>>>6&63)<<M[u++&3],s[u>>>2]|=(128|d&63)<<M[u++&3]):(d=65536+((d&1023)<<10|n.charCodeAt(++v)&1023),s[u>>>2]|=(240|d>>>18)<<M[u++&3],s[u>>>2]|=(128|d>>>12&63)<<M[u++&3],s[u>>>2]|=(128|d>>>6&63)<<M[u++&3],s[u>>>2]|=(128|d&63)<<M[u++&3]);this.lastByteIndex=u,this.bytes+=u-this.start,u>=64?(this.block=s[16],this.start=u-64,this.hash(),this.hashed=!0):this.start=u}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},T.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var n=this.blocks,f=this.lastByteIndex;n[16]=this.block,n[f>>>2]|=z[f&3],this.block=n[16],f>=56&&(this.hashed||this.hash(),n[0]=this.block,n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),n[14]=this.hBytes<<3|this.bytes>>>29,n[15]=this.bytes<<3,this.hash()}},T.prototype.hash=function(){var n=this.h0,f=this.h1,x=this.h2,d=this.h3,v=this.h4,u=this.h5,y=this.h6,s=this.h7,b=this.blocks,E,R,C,O,U,D,r,t,a,l,o;for(E=16;E<64;++E)U=b[E-15],R=(U>>>7|U<<25)^(U>>>18|U<<14)^U>>>3,U=b[E-2],C=(U>>>17|U<<15)^(U>>>19|U<<13)^U>>>10,b[E]=b[E-16]+R+b[E-7]+C<<0;for(o=f&x,E=0;E<64;E+=4)this.first?(this.is224?(t=300032,U=b[0]-1413257819,s=U-150054599<<0,d=U+24177077<<0):(t=704751109,U=b[0]-210244248,s=U-1521486534<<0,d=U+143694565<<0),this.first=!1):(R=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),C=(v>>>6|v<<26)^(v>>>11|v<<21)^(v>>>25|v<<7),t=n&f,O=t^n&x^o,r=v&u^~v&y,U=s+C+r+q[E]+b[E],D=R+O,s=d+U<<0,d=U+D<<0),R=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),C=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),a=d&n,O=a^d&f^t,r=s&v^~s&u,U=y+C+r+q[E+1]+b[E+1],D=R+O,y=x+U<<0,x=U+D<<0,R=(x>>>2|x<<30)^(x>>>13|x<<19)^(x>>>22|x<<10),C=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7),l=x&d,O=l^x&n^a,r=y&s^~y&v,U=u+C+r+q[E+2]+b[E+2],D=R+O,u=f+U<<0,f=U+D<<0,R=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),C=(u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7),o=f&x,O=o^f&d^l,r=u&y^~u&s,U=v+C+r+q[E+3]+b[E+3],D=R+O,v=n+U<<0,n=U+D<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+n<<0,this.h1=this.h1+f<<0,this.h2=this.h2+x<<0,this.h3=this.h3+d<<0,this.h4=this.h4+v<<0,this.h5=this.h5+u<<0,this.h6=this.h6+y<<0,this.h7=this.h7+s<<0},T.prototype.hex=function(){this.finalize();var n=this.h0,f=this.h1,x=this.h2,d=this.h3,v=this.h4,u=this.h5,y=this.h6,s=this.h7,b=p[n>>>28&15]+p[n>>>24&15]+p[n>>>20&15]+p[n>>>16&15]+p[n>>>12&15]+p[n>>>8&15]+p[n>>>4&15]+p[n&15]+p[f>>>28&15]+p[f>>>24&15]+p[f>>>20&15]+p[f>>>16&15]+p[f>>>12&15]+p[f>>>8&15]+p[f>>>4&15]+p[f&15]+p[x>>>28&15]+p[x>>>24&15]+p[x>>>20&15]+p[x>>>16&15]+p[x>>>12&15]+p[x>>>8&15]+p[x>>>4&15]+p[x&15]+p[d>>>28&15]+p[d>>>24&15]+p[d>>>20&15]+p[d>>>16&15]+p[d>>>12&15]+p[d>>>8&15]+p[d>>>4&15]+p[d&15]+p[v>>>28&15]+p[v>>>24&15]+p[v>>>20&15]+p[v>>>16&15]+p[v>>>12&15]+p[v>>>8&15]+p[v>>>4&15]+p[v&15]+p[u>>>28&15]+p[u>>>24&15]+p[u>>>20&15]+p[u>>>16&15]+p[u>>>12&15]+p[u>>>8&15]+p[u>>>4&15]+p[u&15]+p[y>>>28&15]+p[y>>>24&15]+p[y>>>20&15]+p[y>>>16&15]+p[y>>>12&15]+p[y>>>8&15]+p[y>>>4&15]+p[y&15];return this.is224||(b+=p[s>>>28&15]+p[s>>>24&15]+p[s>>>20&15]+p[s>>>16&15]+p[s>>>12&15]+p[s>>>8&15]+p[s>>>4&15]+p[s&15]),b},T.prototype.toString=T.prototype.hex,T.prototype.digest=function(){this.finalize();var n=this.h0,f=this.h1,x=this.h2,d=this.h3,v=this.h4,u=this.h5,y=this.h6,s=this.h7,b=[n>>>24&255,n>>>16&255,n>>>8&255,n&255,f>>>24&255,f>>>16&255,f>>>8&255,f&255,x>>>24&255,x>>>16&255,x>>>8&255,x&255,d>>>24&255,d>>>16&255,d>>>8&255,d&255,v>>>24&255,v>>>16&255,v>>>8&255,v&255,u>>>24&255,u>>>16&255,u>>>8&255,u&255,y>>>24&255,y>>>16&255,y>>>8&255,y&255];return this.is224||b.push(s>>>24&255,s>>>16&255,s>>>8&255,s&255),b},T.prototype.array=T.prototype.digest,T.prototype.arrayBuffer=function(){this.finalize();var n=new ArrayBuffer(this.is224?28:32),f=new DataView(n);return f.setUint32(0,this.h0),f.setUint32(4,this.h1),f.setUint32(8,this.h2),f.setUint32(12,this.h3),f.setUint32(16,this.h4),f.setUint32(20,this.h5),f.setUint32(24,this.h6),this.is224||f.setUint32(28,this.h7),n};function W(n,f,x){var d,v=typeof n;if(v==="string"){var u=[],y=n.length,s=0,b;for(d=0;d<y;++d)b=n.charCodeAt(d),b<128?u[s++]=b:b<2048?(u[s++]=192|b>>>6,u[s++]=128|b&63):b<55296||b>=57344?(u[s++]=224|b>>>12,u[s++]=128|b>>>6&63,u[s++]=128|b&63):(b=65536+((b&1023)<<10|n.charCodeAt(++d)&1023),u[s++]=240|b>>>18,u[s++]=128|b>>>12&63,u[s++]=128|b>>>6&63,u[s++]=128|b&63);n=u}else if(v==="object"){if(n===null)throw new Error(e);if(P&&n.constructor===ArrayBuffer)n=new Uint8Array(n);else if(!Array.isArray(n)&&(!P||!ArrayBuffer.isView(n)))throw new Error(e)}else throw new Error(e);n.length>64&&(n=new T(f,!0).update(n).array());var E=[],R=[];for(d=0;d<64;++d){var C=n[d]||0;E[d]=92^C,R[d]=54^C}T.call(this,f,x),this.update(R),this.oKeyPad=E,this.inner=!0,this.sharedMemory=x}W.prototype=new T,W.prototype.finalize=function(){if(T.prototype.finalize.call(this),this.inner){this.inner=!1;var n=this.array();T.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(n),T.prototype.finalize.call(this)}};var N=ee();N.sha256=N,N.sha224=ee(!0),N.sha256.hmac=K(),N.sha224.hmac=K(!0),Y?k.exports=N:(F.sha256=N.sha256,F.sha224=N.sha224)})()})(te)),te.exports}var ge=me();const xe=de(ge);class Q extends Error{}Q.prototype.name="InvalidTokenError";function ke(k){return decodeURIComponent(atob(k).replace(/(.)/g,(e,S)=>{let F=S.charCodeAt(0).toString(16).toUpperCase();return F.length<2&&(F="0"+F),"%"+F}))}function we(k){let e=k.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return ke(e)}catch{return atob(e)}}function ne(k,e){if(typeof k!="string")throw new Q("Invalid token specified: must be a string");e||(e={});const S=e.header===!0?0:1,F=k.split(".")[S];if(typeof F!="string")throw new Q(`Invalid token specified: missing part #${S+1}`);let L;try{L=we(F)}catch(_){throw new Q(`Invalid token specified: invalid base64 for part #${S+1} (${_.message})`)}try{return JSON.parse(L)}catch(_){throw new Q(`Invalid token specified: invalid json for part #${S+1} (${_.message})`)}}if(typeof Promise>"u")throw Error("Keycloak requires an environment that supports Promises. Make sure that you include the appropriate polyfill.");function ie(k){if(!(this instanceof ie))throw new Error("The 'Keycloak' constructor must be invoked with 'new'.");for(var e=this,S,F=[],L,_={enable:!0,callbackList:[],interval:5},Y=document.getElementsByTagName("script"),P=0;P<Y.length;P++)(Y[P].src.indexOf("keycloak.js")!==-1||Y[P].src.indexOf("keycloak.min.js")!==-1)&&Y[P].src.indexOf("version=")!==-1&&(e.iframeVersion=Y[P].src.substring(Y[P].src.indexOf("version=")+8).split("&")[0]);var p=!0,z=D(console.info),M=D(console.warn);e.init=function(r){if(e.didInitialize)throw new Error("A 'Keycloak' instance can only be initialized once.");e.didInitialize=!0,e.authenticated=!1,L=U();var t=["default","cordova","cordova-native"];if(r&&t.indexOf(r.adapter)>-1?S=R(r.adapter):r&&typeof r.adapter=="object"?S=r.adapter:window.Cordova||window.cordova?S=R("cordova"):S=R(),r){if(typeof r.useNonce<"u"&&(p=r.useNonce),typeof r.checkLoginIframe<"u"&&(_.enable=r.checkLoginIframe),r.checkLoginIframeInterval&&(_.interval=r.checkLoginIframeInterval),r.onLoad==="login-required"&&(e.loginRequired=!0),r.responseMode)if(r.responseMode==="query"||r.responseMode==="fragment")e.responseMode=r.responseMode;else throw"Invalid value for responseMode";if(r.flow){switch(r.flow){case"standard":e.responseType="code";break;case"implicit":e.responseType="id_token token";break;case"hybrid":e.responseType="code id_token token";break;default:throw"Invalid value for flow"}e.flow=r.flow}if(r.timeSkew!=null&&(e.timeSkew=r.timeSkew),r.redirectUri&&(e.redirectUri=r.redirectUri),r.silentCheckSsoRedirectUri&&(e.silentCheckSsoRedirectUri=r.silentCheckSsoRedirectUri),typeof r.silentCheckSsoFallback=="boolean"?e.silentCheckSsoFallback=r.silentCheckSsoFallback:e.silentCheckSsoFallback=!0,typeof r.pkceMethod<"u"){if(r.pkceMethod!=="S256"&&r.pkceMethod!==!1)throw new TypeError(`Invalid value for pkceMethod', expected 'S256' or false but got ${r.pkceMethod}.`);e.pkceMethod=r.pkceMethod}else e.pkceMethod="S256";typeof r.enableLogging=="boolean"?e.enableLogging=r.enableLogging:e.enableLogging=!1,r.logoutMethod==="POST"?e.logoutMethod="POST":e.logoutMethod="GET",typeof r.scope=="string"&&(e.scope=r.scope),typeof r.acrValues=="string"&&(e.acrValues=r.acrValues),typeof r.messageReceiveTimeout=="number"&&r.messageReceiveTimeout>0?e.messageReceiveTimeout=r.messageReceiveTimeout:e.messageReceiveTimeout=1e4}e.responseMode||(e.responseMode="fragment"),e.responseType||(e.responseType="code",e.flow="standard");var a=v(),l=v();l.promise.then(function(){e.onReady&&e.onReady(e.authenticated),a.setSuccess(e.authenticated)}).catch(function(g){a.setError(g)});var o=T();function h(){var g=function(A){A||(w.prompt="none"),r&&r.locale&&(w.locale=r.locale),e.login(w).then(function(){l.setSuccess()}).catch(function(J){l.setError(J)})},m=function(){var A=document.createElement("iframe"),J=e.createLoginUrl({prompt:"none",redirectUri:e.silentCheckSsoRedirectUri});A.setAttribute("src",J),A.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"),A.setAttribute("title","keycloak-silent-check-sso"),A.style.display="none",document.body.appendChild(A);var $=function(B){if(!(B.origin!==window.location.origin||A.contentWindow!==B.source)){var G=f(B.data);K(G,l),document.body.removeChild(A),window.removeEventListener("message",$)}};window.addEventListener("message",$)},w={};switch(r.onLoad){case"check-sso":_.enable?y().then(function(){b().then(function(A){A?l.setSuccess():e.silentCheckSsoRedirectUri?m():g(!1)}).catch(function(A){l.setError(A)})}):e.silentCheckSsoRedirectUri?m():g(!1);break;case"login-required":g(!0);break;default:throw"Invalid value for onLoad"}}function i(){var g=f(window.location.href);if(g&&window.history.replaceState(window.history.state,null,g.newUrl),g&&g.valid)return y().then(function(){K(g,l)}).catch(function(m){l.setError(m)});r?r.token&&r.refreshToken?(N(r.token,r.refreshToken,r.idToken),_.enable?y().then(function(){b().then(function(m){m?(e.onAuthSuccess&&e.onAuthSuccess(),l.setSuccess(),s()):l.setSuccess()}).catch(function(m){l.setError(m)})}):e.updateToken(-1).then(function(){e.onAuthSuccess&&e.onAuthSuccess(),l.setSuccess()}).catch(function(m){e.onAuthError&&e.onAuthError(),r.onLoad?h():l.setError(m)})):r.onLoad?h():l.setSuccess():l.setSuccess()}function c(){var g=v(),m=function(){(document.readyState==="interactive"||document.readyState==="complete")&&(document.removeEventListener("readystatechange",m),g.setSuccess())};return document.addEventListener("readystatechange",m),m(),g.promise}return o.then(function(){c().then(E).then(i).catch(function(g){a.setError(g)})}),o.catch(function(g){a.setError(g)}),a.promise},e.login=function(r){return S.login(r)};function q(r){var t=null,a=window.crypto||window.msCrypto;if(a&&a.getRandomValues&&window.Uint8Array)return t=new Uint8Array(r),a.getRandomValues(t),t;t=new Array(r);for(var l=0;l<t.length;l++)t[l]=Math.floor(256*Math.random());return t}function X(r){return I(r,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789")}function I(r,t){for(var a=q(r),l=new Array(r),o=0;o<r;o++)l[o]=t.charCodeAt(a[o]%t.length);return String.fromCharCode.apply(null,l)}function Z(r,t){if(r!=="S256")throw new TypeError(`Invalid value for 'pkceMethod', expected 'S256' but got '${r}'.`);const a=new Uint8Array(xe.arrayBuffer(t));return be(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}function ee(r){var t={id_token:{acr:r}};return JSON.stringify(t)}e.createLoginUrl=function(r){var t=n(),a=n(),l=S.redirectUri(r),o={state:t,nonce:a,redirectUri:encodeURIComponent(l),loginOptions:r};r&&r.prompt&&(o.prompt=r.prompt);var h;r&&r.action=="register"?h=e.endpoints.register():h=e.endpoints.authorize();var i=r&&r.scope||e.scope;i?i.indexOf("openid")===-1&&(i="openid "+i):i="openid";var c=h+"?client_id="+encodeURIComponent(e.clientId)+"&redirect_uri="+encodeURIComponent(l)+"&state="+encodeURIComponent(t)+"&response_mode="+encodeURIComponent(e.responseMode)+"&response_type="+encodeURIComponent(e.responseType)+"&scope="+encodeURIComponent(i);if(p&&(c=c+"&nonce="+encodeURIComponent(a)),r&&r.prompt&&(c+="&prompt="+encodeURIComponent(r.prompt)),r&&r.maxAge&&(c+="&max_age="+encodeURIComponent(r.maxAge)),r&&r.loginHint&&(c+="&login_hint="+encodeURIComponent(r.loginHint)),r&&r.idpHint&&(c+="&kc_idp_hint="+encodeURIComponent(r.idpHint)),r&&r.action&&r.action!="register"&&(c+="&kc_action="+encodeURIComponent(r.action)),r&&r.locale&&(c+="&ui_locales="+encodeURIComponent(r.locale)),r&&r.acr){var g=ee(r.acr);c+="&claims="+encodeURIComponent(g)}if((r&&r.acrValues||e.acrValues)&&(c+="&acr_values="+encodeURIComponent(r.acrValues||e.acrValues)),e.pkceMethod){var m=X(96);o.pkceCodeVerifier=m;var w=Z(e.pkceMethod,m);c+="&code_challenge="+w,c+="&code_challenge_method="+e.pkceMethod}return L.add(o),c},e.logout=function(r){return S.logout(r)},e.createLogoutUrl=function(r){if((r?.logoutMethod??e.logoutMethod)==="POST")return e.endpoints.logout();var a=e.endpoints.logout()+"?client_id="+encodeURIComponent(e.clientId)+"&post_logout_redirect_uri="+encodeURIComponent(S.redirectUri(r,!1));return e.idToken&&(a+="&id_token_hint="+encodeURIComponent(e.idToken)),a},e.register=function(r){return S.register(r)},e.createRegisterUrl=function(r){return r||(r={}),r.action="register",e.createLoginUrl(r)},e.createAccountUrl=function(r){var t=j(),a=void 0;return typeof t<"u"&&(a=t+"/account?referrer="+encodeURIComponent(e.clientId)+"&referrer_uri="+encodeURIComponent(S.redirectUri(r))),a},e.accountManagement=function(){return S.accountManagement()},e.hasRealmRole=function(r){var t=e.realmAccess;return!!t&&t.roles.indexOf(r)>=0},e.hasResourceRole=function(r,t){if(!e.resourceAccess)return!1;var a=e.resourceAccess[t||e.clientId];return!!a&&a.roles.indexOf(r)>=0},e.loadUserProfile=function(){var r=j()+"/account",t=new XMLHttpRequest;t.open("GET",r,!0),t.setRequestHeader("Accept","application/json"),t.setRequestHeader("Authorization","bearer "+e.token);var a=v();return t.onreadystatechange=function(){t.readyState==4&&(t.status==200?(e.profile=JSON.parse(t.responseText),a.setSuccess(e.profile)):a.setError())},t.send(),a.promise},e.loadUserInfo=function(){var r=e.endpoints.userinfo(),t=new XMLHttpRequest;t.open("GET",r,!0),t.setRequestHeader("Accept","application/json"),t.setRequestHeader("Authorization","bearer "+e.token);var a=v();return t.onreadystatechange=function(){t.readyState==4&&(t.status==200?(e.userInfo=JSON.parse(t.responseText),a.setSuccess(e.userInfo)):a.setError())},t.send(),a.promise},e.isTokenExpired=function(r){if(!e.tokenParsed||!e.refreshToken&&e.flow!="implicit")throw"Not authenticated";if(e.timeSkew==null)return z("[KEYCLOAK] Unable to determine if token is expired as timeskew is not set"),!0;var t=e.tokenParsed.exp-Math.ceil(new Date().getTime()/1e3)+e.timeSkew;if(r){if(isNaN(r))throw"Invalid minValidity";t-=r}return t<0},e.updateToken=function(r){var t=v();if(!e.refreshToken)return t.setError(),t.promise;r=r||5;var a=function(){var o=!1;if(r==-1?(o=!0,z("[KEYCLOAK] Refreshing token: forced refresh")):(!e.tokenParsed||e.isTokenExpired(r))&&(o=!0,z("[KEYCLOAK] Refreshing token: token expired")),!o)t.setSuccess(!1);else{var h="grant_type=refresh_token&refresh_token="+e.refreshToken,i=e.endpoints.token();if(F.push(t),F.length==1){var c=new XMLHttpRequest;c.open("POST",i,!0),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.withCredentials=!0,h+="&client_id="+encodeURIComponent(e.clientId);var g=new Date().getTime();c.onreadystatechange=function(){if(c.readyState==4)if(c.status==200){z("[KEYCLOAK] Token refreshed"),g=(g+new Date().getTime())/2;var m=JSON.parse(c.responseText);N(m.access_token,m.refresh_token,m.id_token,g),e.onAuthRefreshSuccess&&e.onAuthRefreshSuccess();for(var w=F.pop();w!=null;w=F.pop())w.setSuccess(!0)}else{M("[KEYCLOAK] Failed to refresh token"),c.status==400&&e.clearToken(),e.onAuthRefreshError&&e.onAuthRefreshError();for(var w=F.pop();w!=null;w=F.pop())w.setError(!0)}},c.send(h)}}};if(_.enable){var l=b();l.then(function(){a()}).catch(function(o){t.setError(o)})}else a();return t.promise},e.clearToken=function(){e.token&&(N(null,null,null),e.onAuthLogout&&e.onAuthLogout(),e.loginRequired&&e.login())};function j(){if(typeof e.authServerUrl<"u")return e.authServerUrl.charAt(e.authServerUrl.length-1)=="/"?e.authServerUrl+"realms/"+encodeURIComponent(e.realm):e.authServerUrl+"/realms/"+encodeURIComponent(e.realm)}function re(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}function K(r,t){var a=r.code,l=r.error,o=r.prompt,h=new Date().getTime();if(r.kc_action_status&&e.onActionUpdate&&e.onActionUpdate(r.kc_action_status),l){if(o!="none")if(r.error_description&&r.error_description==="authentication_expired")e.login(r.loginOptions);else{var i={error:l,error_description:r.error_description};e.onAuthError&&e.onAuthError(i),t&&t.setError(i)}else t&&t.setSuccess();return}else e.flow!="standard"&&(r.access_token||r.id_token)&&w(r.access_token,null,r.id_token,!0);if(e.flow!="implicit"&&a){var c="code="+a+"&grant_type=authorization_code",g=e.endpoints.token(),m=new XMLHttpRequest;m.open("POST",g,!0),m.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c+="&client_id="+encodeURIComponent(e.clientId),c+="&redirect_uri="+r.redirectUri,r.pkceCodeVerifier&&(c+="&code_verifier="+r.pkceCodeVerifier),m.withCredentials=!0,m.onreadystatechange=function(){if(m.readyState==4)if(m.status==200){var A=JSON.parse(m.responseText);w(A.access_token,A.refresh_token,A.id_token,e.flow==="standard"),s()}else e.onAuthError&&e.onAuthError(),t&&t.setError()},m.send(c)}function w(A,J,$,B){h=(h+new Date().getTime())/2,N(A,J,$,h),p&&e.idTokenParsed&&e.idTokenParsed.nonce!=r.storedNonce?(z("[KEYCLOAK] Invalid nonce, clearing token"),e.clearToken(),t&&t.setError()):B&&(e.onAuthSuccess&&e.onAuthSuccess(),t&&t.setSuccess())}}function T(r){var t=v(),a;k?typeof k=="string"&&(a=k):a="keycloak.json";function l(m){m?e.endpoints={authorize:function(){return m.authorization_endpoint},token:function(){return m.token_endpoint},logout:function(){if(!m.end_session_endpoint)throw"Not supported by the OIDC server";return m.end_session_endpoint},checkSessionIframe:function(){if(!m.check_session_iframe)throw"Not supported by the OIDC server";return m.check_session_iframe},register:function(){throw'Redirection to "Register user" page not supported in standard OIDC mode'},userinfo:function(){if(!m.userinfo_endpoint)throw"Not supported by the OIDC server";return m.userinfo_endpoint}}:e.endpoints={authorize:function(){return j()+"/protocol/openid-connect/auth"},token:function(){return j()+"/protocol/openid-connect/token"},logout:function(){return j()+"/protocol/openid-connect/logout"},checkSessionIframe:function(){var w=j()+"/protocol/openid-connect/login-status-iframe.html";return e.iframeVersion&&(w=w+"?version="+e.iframeVersion),w},thirdPartyCookiesIframe:function(){var w=j()+"/protocol/openid-connect/3p-cookies/step1.html";return e.iframeVersion&&(w=w+"?version="+e.iframeVersion),w},register:function(){return j()+"/protocol/openid-connect/registrations"},userinfo:function(){return j()+"/protocol/openid-connect/userinfo"}}}if(a){var o=new XMLHttpRequest;o.open("GET",a,!0),o.setRequestHeader("Accept","application/json"),o.onreadystatechange=function(){if(o.readyState==4)if(o.status==200||W(o)){var m=JSON.parse(o.responseText);e.authServerUrl=m["auth-server-url"],e.realm=m.realm,e.clientId=m.resource,l(null),t.setSuccess()}else t.setError()},o.send()}else{if(!k.clientId)throw"clientId missing";e.clientId=k.clientId;var h=k.oidcProvider;if(h)if(typeof h=="string"){var g;h.charAt(h.length-1)=="/"?g=h+".well-known/openid-configuration":g=h+"/.well-known/openid-configuration";var o=new XMLHttpRequest;o.open("GET",g,!0),o.setRequestHeader("Accept","application/json"),o.onreadystatechange=function(){if(o.readyState==4)if(o.status==200||W(o)){var w=JSON.parse(o.responseText);l(w),t.setSuccess()}else t.setError()},o.send()}else l(h),t.setSuccess();else{if(!k.url){for(var i=document.getElementsByTagName("script"),c=0;c<i.length;c++)if(i[c].src.match(/.*keycloak\.js/)){k.url=i[c].src.substr(0,i[c].src.indexOf("/js/keycloak.js"));break}}if(!k.realm)throw"realm missing";e.authServerUrl=k.url,e.realm=k.realm,l(null),t.setSuccess()}}return t.promise}function W(r){return r.status==0&&r.responseText&&r.responseURL.startsWith("file:")}function N(r,t,a,l){if(e.tokenTimeoutHandle&&(clearTimeout(e.tokenTimeoutHandle),e.tokenTimeoutHandle=null),t?(e.refreshToken=t,e.refreshTokenParsed=ne(t)):(delete e.refreshToken,delete e.refreshTokenParsed),a?(e.idToken=a,e.idTokenParsed=ne(a)):(delete e.idToken,delete e.idTokenParsed),r){if(e.token=r,e.tokenParsed=ne(r),e.sessionId=e.tokenParsed.sid,e.authenticated=!0,e.subject=e.tokenParsed.sub,e.realmAccess=e.tokenParsed.realm_access,e.resourceAccess=e.tokenParsed.resource_access,l&&(e.timeSkew=Math.floor(l/1e3)-e.tokenParsed.iat),e.timeSkew!=null&&(z("[KEYCLOAK] Estimated time difference between browser and server is "+e.timeSkew+" seconds"),e.onTokenExpired)){var o=(e.tokenParsed.exp-new Date().getTime()/1e3+e.timeSkew)*1e3;z("[KEYCLOAK] Token expires in "+Math.round(o/1e3)+" s"),o<=0?e.onTokenExpired():e.tokenTimeoutHandle=setTimeout(e.onTokenExpired,o)}}else delete e.token,delete e.tokenParsed,delete e.subject,delete e.realmAccess,delete e.resourceAccess,e.authenticated=!1}function n(){var r="0123456789abcdef",t=I(36,r).split("");t[14]="4",t[19]=r.substr(t[19]&3|8,1),t[8]=t[13]=t[18]=t[23]="-";var a=t.join("");return a}function f(r){var t=x(r);if(t){var a=L.get(t.state);return a&&(t.valid=!0,t.redirectUri=a.redirectUri,t.storedNonce=a.nonce,t.prompt=a.prompt,t.pkceCodeVerifier=a.pkceCodeVerifier,t.loginOptions=a.loginOptions),t}}function x(r){var t;switch(e.flow){case"standard":t=["code","state","session_state","kc_action_status","iss"];break;case"implicit":t=["access_token","token_type","id_token","state","session_state","expires_in","kc_action_status","iss"];break;case"hybrid":t=["access_token","token_type","id_token","code","state","session_state","expires_in","kc_action_status","iss"];break}t.push("error"),t.push("error_description"),t.push("error_uri");var a=r.indexOf("?"),l=r.indexOf("#"),o,h;if(e.responseMode==="query"&&a!==-1?(o=r.substring(0,a),h=d(r.substring(a+1,l!==-1?l:r.length),t),h.paramsString!==""&&(o+="?"+h.paramsString),l!==-1&&(o+=r.substring(l))):e.responseMode==="fragment"&&l!==-1&&(o=r.substring(0,l),h=d(r.substring(l+1),t),h.paramsString!==""&&(o+="#"+h.paramsString)),h&&h.oauthParams){if(e.flow==="standard"||e.flow==="hybrid"){if((h.oauthParams.code||h.oauthParams.error)&&h.oauthParams.state)return h.oauthParams.newUrl=o,h.oauthParams}else if(e.flow==="implicit"&&(h.oauthParams.access_token||h.oauthParams.error)&&h.oauthParams.state)return h.oauthParams.newUrl=o,h.oauthParams}}function d(r,t){for(var a=r.split("&"),l={paramsString:"",oauthParams:{}},o=0;o<a.length;o++){var h=a[o].indexOf("="),i=a[o].slice(0,h);t.indexOf(i)!==-1?l.oauthParams[i]=a[o].slice(h+1):(l.paramsString!==""&&(l.paramsString+="&"),l.paramsString+=a[o])}return l}function v(){var r={setSuccess:function(t){r.resolve(t)},setError:function(t){r.reject(t)}};return r.promise=new Promise(function(t,a){r.resolve=t,r.reject=a}),r}function u(r,t,a){var l=null,o=new Promise(function(h,i){l=setTimeout(function(){i({error:a})},t)});return Promise.race([r,o]).finally(function(){clearTimeout(l)})}function y(){var r=v();if(!_.enable||_.iframe)return r.setSuccess(),r.promise;var t=document.createElement("iframe");_.iframe=t,t.onload=function(){var o=e.endpoints.authorize();o.charAt(0)==="/"?_.iframeOrigin=re():_.iframeOrigin=o.substring(0,o.indexOf("/",8)),r.setSuccess()};var a=e.endpoints.checkSessionIframe();t.setAttribute("src",a),t.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"),t.setAttribute("title","keycloak-session-iframe"),t.style.display="none",document.body.appendChild(t);var l=function(o){if(!(o.origin!==_.iframeOrigin||_.iframe.contentWindow!==o.source)&&(o.data=="unchanged"||o.data=="changed"||o.data=="error")){o.data!="unchanged"&&e.clearToken();for(var h=_.callbackList.splice(0,_.callbackList.length),i=h.length-1;i>=0;--i){var c=h[i];o.data=="error"?c.setError():c.setSuccess(o.data=="unchanged")}}};return window.addEventListener("message",l,!1),r.promise}function s(){_.enable&&e.token&&setTimeout(function(){b().then(function(r){r&&s()})},_.interval*1e3)}function b(){var r=v();if(_.iframe&&_.iframeOrigin){var t=e.clientId+" "+(e.sessionId?e.sessionId:"");_.callbackList.push(r);var a=_.iframeOrigin;_.callbackList.length==1&&_.iframe.contentWindow.postMessage(t,a)}else r.setSuccess();return r.promise}function E(){var r=v();if(_.enable||e.silentCheckSsoRedirectUri){var t=document.createElement("iframe");t.setAttribute("src",e.endpoints.thirdPartyCookiesIframe()),t.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"),t.setAttribute("title","keycloak-3p-check-iframe"),t.style.display="none",document.body.appendChild(t);var a=function(l){t.contentWindow===l.source&&(l.data!=="supported"&&l.data!=="unsupported"||(l.data==="unsupported"&&(M(`[KEYCLOAK] Your browser is blocking access to 3rd-party cookies, this means:

 - It is not possible to retrieve tokens without redirecting to the Keycloak server (a.k.a. no support for silent authentication).
 - It is not possible to automatically detect changes to the session status (such as the user logging out in another tab).

For more information see: https://www.keycloak.org/docs/latest/securing_apps/#_modern_browsers`),_.enable=!1,e.silentCheckSsoFallback&&(e.silentCheckSsoRedirectUri=!1)),document.body.removeChild(t),window.removeEventListener("message",a),r.setSuccess()))};window.addEventListener("message",a,!1)}else r.setSuccess();return u(r.promise,e.messageReceiveTimeout,"Timeout when waiting for 3rd party check iframe message.")}function R(r){if(!r||r=="default")return{login:function(i){return window.location.assign(e.createLoginUrl(i)),v().promise},logout:async function(i){if((i?.logoutMethod??e.logoutMethod)==="GET"){window.location.replace(e.createLogoutUrl(i));return}const g=e.createLogoutUrl(i),m=await fetch(g,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id_token_hint:e.idToken,client_id:e.clientId,post_logout_redirect_uri:S.redirectUri(i,!1)})});if(m.redirected){window.location.href=m.url;return}if(m.ok){window.location.reload();return}throw new Error("Logout failed, request returned an error code.")},register:function(i){return window.location.assign(e.createRegisterUrl(i)),v().promise},accountManagement:function(){var i=e.createAccountUrl();if(typeof i<"u")window.location.href=i;else throw"Not supported by the OIDC server";return v().promise},redirectUri:function(i,c){return i&&i.redirectUri?i.redirectUri:e.redirectUri?e.redirectUri:location.href}};if(r=="cordova"){_.enable=!1;var t=function(i,c,g){return window.cordova&&window.cordova.InAppBrowser?window.cordova.InAppBrowser.open(i,c,g):window.open(i,c,g)},a=function(i){return i&&i.cordovaOptions?Object.keys(i.cordovaOptions).reduce(function(c,g){return c[g]=i.cordovaOptions[g],c},{}):{}},l=function(i){return Object.keys(i).reduce(function(c,g){return c.push(g+"="+i[g]),c},[]).join(",")},o=function(i){var c=a(i);return c.location="no",i&&i.prompt=="none"&&(c.hidden="yes"),l(c)},h=function(){return e.redirectUri||"http://localhost"};return{login:function(i){var c=v(),g=o(i),m=e.createLoginUrl(i),w=t(m,"_blank",g),A=!1,J=!1,$=function(){J=!0,w.close()};return w.addEventListener("loadstart",function(B){if(B.url.indexOf(h())==0){var G=f(B.url);K(G,c),$(),A=!0}}),w.addEventListener("loaderror",function(B){if(!A)if(B.url.indexOf(h())==0){var G=f(B.url);K(G,c),$(),A=!0}else c.setError(),$()}),w.addEventListener("exit",function(B){J||c.setError({reason:"closed_by_user"})}),c.promise},logout:function(i){var c=v(),g=e.createLogoutUrl(i),m=t(g,"_blank","location=no,hidden=yes,clearcache=yes"),w;return m.addEventListener("loadstart",function(A){A.url.indexOf(h())==0&&m.close()}),m.addEventListener("loaderror",function(A){A.url.indexOf(h())==0||(w=!0),m.close()}),m.addEventListener("exit",function(A){w?c.setError():(e.clearToken(),c.setSuccess())}),c.promise},register:function(i){var c=v(),g=e.createRegisterUrl(),m=o(i),w=t(g,"_blank",m);return w.addEventListener("loadstart",function(A){if(A.url.indexOf(h())==0){w.close();var J=f(A.url);K(J,c)}}),c.promise},accountManagement:function(){var i=e.createAccountUrl();if(typeof i<"u"){var c=t(i,"_blank","location=no");c.addEventListener("loadstart",function(g){g.url.indexOf(h())==0&&c.close()})}else throw"Not supported by the OIDC server"},redirectUri:function(i){return h()}}}if(r=="cordova-native")return _.enable=!1,{login:function(i){var c=v(),g=e.createLoginUrl(i);return universalLinks.subscribe("keycloak",function(m){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var w=f(m.url);K(w,c)}),window.cordova.plugins.browsertab.openUrl(g),c.promise},logout:function(i){var c=v(),g=e.createLogoutUrl(i);return universalLinks.subscribe("keycloak",function(m){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),e.clearToken(),c.setSuccess()}),window.cordova.plugins.browsertab.openUrl(g),c.promise},register:function(i){var c=v(),g=e.createRegisterUrl(i);return universalLinks.subscribe("keycloak",function(m){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var w=f(m.url);K(w,c)}),window.cordova.plugins.browsertab.openUrl(g),c.promise},accountManagement:function(){var i=e.createAccountUrl();if(typeof i<"u")window.cordova.plugins.browsertab.openUrl(i);else throw"Not supported by the OIDC server"},redirectUri:function(i){return i&&i.redirectUri?i.redirectUri:e.redirectUri?e.redirectUri:"http://localhost"}};throw"invalid adapter type: "+r}var C=function(){if(!(this instanceof C))return new C;localStorage.setItem("kc-test","test"),localStorage.removeItem("kc-test");var r=this;function t(){for(var a=new Date().getTime(),l=0;l<localStorage.length;l++){var o=localStorage.key(l);if(o&&o.indexOf("kc-callback-")==0){var h=localStorage.getItem(o);if(h)try{var i=JSON.parse(h).expires;(!i||i<a)&&localStorage.removeItem(o)}catch{localStorage.removeItem(o)}}}}r.get=function(a){if(a){var l="kc-callback-"+a,o=localStorage.getItem(l);return o&&(localStorage.removeItem(l),o=JSON.parse(o)),t(),o}},r.add=function(a){t();var l="kc-callback-"+a.state;a.expires=new Date().getTime()+3600*1e3,localStorage.setItem(l,JSON.stringify(a))}},O=function(){if(!(this instanceof O))return new O;var r=this;r.get=function(o){if(o){var h=a("kc-callback-"+o);if(l("kc-callback-"+o,"",t(-100)),h)return JSON.parse(h)}},r.add=function(o){l("kc-callback-"+o.state,JSON.stringify(o),t(60))},r.removeItem=function(o){l(o,"",t(-100))};var t=function(o){var h=new Date;return h.setTime(h.getTime()+o*60*1e3),h},a=function(o){for(var h=o+"=",i=document.cookie.split(";"),c=0;c<i.length;c++){for(var g=i[c];g.charAt(0)==" ";)g=g.substring(1);if(g.indexOf(h)==0)return g.substring(h.length,g.length)}return""},l=function(o,h,i){var c=o+"="+h+"; expires="+i.toUTCString()+"; ";document.cookie=c}};function U(){try{return new C}catch{}return new O}function D(r){return function(){e.enableLogging&&r.apply(console,Array.prototype.slice.call(arguments))}}}function be(k){const e=String.fromCodePoint(...k);return btoa(e)}const H=new ie({url:"http://eservice.localhost/auth",realm:"agency-realm",clientId:"aceas-spa"});let se=null;ye();async function ye(){ce();let k=!1;try{const e=new URLSearchParams(window.location.search);let S=window.location.origin+"/aceas/";for(const[L,_]of e)S+=`&${L}=${_}`;S+=window.location.hash??"",await H.init({onLoad:"check-sso",checkLoginIframe:!1,pkceMethod:"S256",redirectUri:S,scope:"openid profile email"})?(se=H.token,V("out","Authenticated."),k=!0):(V("out","Not authenticated: "+S),window.location.hash.includes("switcher")?(console.log("Switching"),H.login()):k=!0)}catch(e){console.error(e),V("out","Init error: "+e)}finally{k&&le()}}H.onTokenExpired=async()=>{try{await H.updateToken(30),se=H.token,V("out","Token refreshed")}catch(k){V("out","Token refresh failed: "+k)}};document.getElementById("login").onclick=()=>{console.log("Logging in..."),H.login()};document.getElementById("logout").onclick=()=>H.logout({redirectUri:window.location.origin+"/aceas/"});document.getElementById("userinfo").onclick=async()=>{if(!H.authenticated)return V("out","Not logged in");const k=await fetch("http://eservice.localhost/auth/realms/agency-realm/protocol/openid-connect/userinfo",{headers:{Authorization:"Bearer "+H.token}});V("out","userinfo: "+JSON.stringify(await k.json(),null,2))};document.getElementById("callapi").onclick=async()=>{if(!H.authenticated)return V("out","Login first");const k=await ue("/aceas/api/hello",H.token);V("out",`ACEAS API [${k.status}]:
${k.body}`)};document.getElementById("switch").onclick=()=>{window.location.href="/cpds/#switcher"};
